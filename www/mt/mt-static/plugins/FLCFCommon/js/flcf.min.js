var FLCFCommon={fields:{},units:{},field_defs:{},field_options:{},field_unit_names:{},unit_groups:{},templates:{},next_num:{},group_labels:{},delete_labels:{},preview_buf:{},callbacks:{},oldGroupNo:null,addGroup:function(){var e,o=jQuery(this),t=o.parent(),n=t.siblings("div.flcf"),r=o.prop("id").match(/(.*?)_add_button/)[1];FLCFCommon.units[r]&&(e=t.children("select.flcf-select-unit").val()),FLCFCommon.addGroupSub(r,e,n)},addUnitGroup:function(){for(var e=jQuery(this),o=e.parent(),t=o.siblings("div.flcf"),n=e.prop("id").match(/(.*?)_add_group_button/)[1],r=o.children("select.flcf-select-unit-group").val(),l=FLCFCommon.unit_groups[n][r].units,i=0;i<l.length;i++)FLCFCommon.addGroupSub(n,l[i],t);jQuery(t).trigger("flcf_add_unit_group",r)},changeUnitGroup:function(){if(confirm(trans("If you change unit group, all data in this customfield will be lost.")+String.fromCharCode(13)+trans("Are you ok ?"))){var e=jQuery(this),o=e.parent(),t=o.siblings("div.flcf"),n=e.prop("id").match(/(.*?)_change_group_button/)[1],r=o.children("select.flcf-select-unit-group").val(),l=FLCFCommon.unit_groups[n][r].units;FLCFCommon.field_options[n].tab&&t.tabs("disable"),t.html("");for(var i=0;i<l.length;i++)FLCFCommon.addGroupSub(n,l[i],t);FLCFCommon.field_options[n].tab&&(t.tabs("destroy"),FLCFCommon.setupTab(n)),jQuery(t).trigger("flcf_change_unit_group",r)}},addGroupSub:function(e,o,t){var n;n=FLCFCommon.units[e]?FLCFCommon.templates[e][o]:FLCFCommon.templates[e];var r=FLCFCommon.next_num[e];n=n.replace(/_flcfg0/g,"_flcfg"+r),FLCFCommon.next_num[e]++,t.append(n);var l=jQuery("#"+e+"_flcfg"+r),i=l.find("a.mt-modal-open");if(i.length&&jQuery.each(i,function(){var e=jQuery(this),o=e.prop("href");o=o.replace(/_flcfg(\d+)/,"_flcfg"+r),e.prop({href:o}),e.mtModal(),e.on("click",function(){jQuery(".flcfex-color").colorpicker("hidePalette"),jQuery(".color-picker").hide()})}),FLCFCommon.setCalendar(l),FLCFCommon.setTabsAndAccordions(l),FLCFCommon.units[e]&&(l.children("div.flcf-field-header").children("select.flcf-change-unit").val(o).on("change",FLCFCommon.changeUnit),jQuery("#"+e+"_flcfg"+r+"_flcf_unit_name_").val(o)),FLCFCommon.renewValue(e),FLCFCommon.tabs[e]){var f=t.find("ul.ui-tabs-nav"),a=l.find("span.flcf-field-label"),c='<li><a href="#'+l.prop("id")+'">'+a.text()+"</a></li>";a.hide(),f.append(c),t.tabs("refresh"),t.tabs("option","active",f.find("li").length-1)}else if(FLCFCommon.accordions[e]){var d=t.find(".flcf-block").length,m=jQuery("#"+e+"_flcfg");m.accordion("refresh"),m.accordion("option","active",d-1)}FLCFCommon.post_add_callback(e,r),l.trigger("flcf_add",o)},post_add_callback:function(e,o){var t=FLCFCommon.field_defs[e];jQuery.each(t,function(t,n){var r=n.type,l=FLCFCommon.callbacks[r];if(l&&l.post_add){var i=e+"_flcfg"+o+"_"+t+"_";l.post_add(e,o,t),FLCFCommon.js_set_values[r]&&l.set_value(e,o,t,jQuery("#"+i).val())}})},changeUnit:function(){var e,o,t,n,r,l,i,f=jQuery(this),a=f.get()[0].nodeName.toLowerCase();"select"==a?(o=(e=f).parent().parent(),r=e.val()):"div"==a&&(o=f,(e=f.find(".flcf-field-header select")).length||(e=[])),r=e.length?e.val():"",t=o.prop("id"),matches=t.match(/(.*?)_flcfg(\d+)/),b=matches[1],n=matches[2];var c={},d={},m=[],u={};FLCFCommon.preview_buf={},jQuery.each(FLCFCommon.field_defs[b],function(e,o){var f=t+"_"+e+"_";"flcf_unit_name"!=e?(c[e]=FLCFCommon.getFieldValue(o,f),(i=FLCFCommon.callbacks[o.type])&&i.get_mode&&(""==r||FLCFCommon.used_ctrls[b][r][e])&&(u[e]=i.get_mode(b,n,e)),i&&i.save_height&&(""==r||FLCFCommon.used_ctrls[b][r][e])&&(d[e]=i.save_height(b,n,e)),FLCFCommon.asset_types[o.type]&&(void 0===FLCFCommon.preview_buf[b]&&(FLCFCommon.preview_buf[b]={}),jQuery("#"+f+"_preview").length&&(FLCFCommon.preview_buf[b][e]=jQuery("#"+f+"_preview").html()))):l=FLCFCommon.getFieldValue(o,f)});var s=jQuery("#"+b+"_flcfg"+n);r&&r!=l&&s.trigger("flcf_before_change_unit",[r,l]);var p,C=FLCFCommon.next_num[b];p=(p=r?FLCFCommon.templates[b][r]:FLCFCommon.templates[b]).replace(/_flcfg0/g,"_flcfg"+C),FLCFCommon.next_num[b]++,o.after(p),FLCFCommon.pre_remove_callback(b,n),o.remove();var F=jQuery("#"+b+"_flcfg"+C);FLCFCommon.setCalendar(F),FLCFCommon.oldGroupNo={},FLCFCommon.oldGroupNo[C]=n,FLCFCommon.post_add_callback(b,C),delete FLCFCommon.oldGroupNo;var _=F.find("a.mt-modal-open");_.length&&jQuery.each(_,function(){var e=jQuery(this),o=e.prop("href");o=o.replace(/_flcfg(\d+)/,"_flcfg"+C),e.prop({href:o}),e.mtModal()});var h=0;if(jQuery.each(FLCFCommon.field_defs[b],function(e,o){var t=b+"_flcfg"+C+"_"+e+"_";if("flcf_unit_name"!=e){if((i=FLCFCommon.callbacks[o.type])&&i.set_value)i.set_value(b,C,e,c[e]);else if("checkbox"==o.type)jQuery("#"+t).prop({checked:c[e]});else if("datetime"==o.type||"date"==o.type||"time"==o.type){FLCFCommon.setDateTime(o.type,t,c[e]),jQuery("#"+t).val(c[e])}else if("radio"==o.type)for(var n=jQuery('input[name="'+t+'"]'),l=0,f=n.length;l<f;l++){var a=jQuery(n[l]);a.val()==c[e]&&a.prop("checked",!0)}else jQuery("#"+t).val(c[e]);if(i&&i.set_mode&&(""==r||FLCFCommon.used_ctrls[b][r][e])&&(i.set_mode(b,C,e,u[e],h),h+=10),i&&i.restore_height&&(""==r||FLCFCommon.used_ctrls[b][r][e])&&m.push({func:i.restore_height,cf_name:b,group_no:C,f_name:e,height:d[e]}),FLCFCommon.asset_types[o.type]){var s=FLCFCommon.preview_buf[b][e];s=void 0===s?"":s.trim(),jQuery("#"+t+"_preview").html(s),s.length&&jQuery("#"+t+"_remove_asset").removeClass("hidden")}var p=jQuery("#"+t).parent().find('label[for="'+t+'"]');(o.required||r&&FLCFCommon.unit_defs[b][r].required[e])&&!p.hasClass("flcf-required")?p.addClass("flcf-required"):!o.required&&r&&!FLCFCommon.unit_defs[b][r].required[e]&&p.hasClass("flcf-required")&&p.removeClass("flcf-required")}}),r&&(jQuery("#"+b+"_flcfg"+C).find(".flcf-change-unit").val(r).on("change",FLCFCommon.changeUnit),jQuery("#"+b+"_flcfg"+C+"_flcf_unit_name_").val(r)),FLCFCommon.renewValue(b),FLCFCommon.field_options[b].tab){var v=F.parent(),y=v.tabs("option","active"),g=F.siblings("ul.ui-tabs-nav");jQuery(g.children("li")[y]).children("a").attr("href","#"+F.prop("id")),F.find(".flcf-field-header .flcf-field-label").hide();var b=v.prop("id").match(/^((?:customfield_|content-field-).*?)_flcfg$/)[1];F.parent().tabs("destroy"),FLCFCommon.setupTab(b,"refresh",y)}else if(FLCFCommon.field_options[b].accordion){var L=F.parent(),y=L.accordion("option","active");L.accordion("refresh"),L.accordion("option","active",y)}return jQuery.each(m,function(e,o){o.func(o.cf_name,o.group_no,o.f_name,o.height)}),F.trigger("flcf_add",r),r&&r!=l&&F.trigger("flcf_change_unit",[r,l]),F},renewValue:function(e){var o;"customfield"==FLCFCommon.cf_type?o=jQuery("#"+e+"-field div.flcf div.flcf-block"):"contentfield"==FLCFCommon.cf_type&&(o=jQuery("#"+e+"_flcfg div.flcf-block"));for(var t=[],n=o.length,r=0;r<n;r++){var l=jQuery(o[r]),i=l.prop("id").match(/_flcfg(\d+)/)[1];l.removeClass("first-child"),l.removeClass("last-child"),0==r&&l.addClass("first-child"),r==n-1&&l.addClass("last-child"),t.push(i);var f=l.children("div.flcf-field-header").children("span.flcf-field-label"),a=FLCFCommon.group_labels[e];if(a=a.replace(/{{number}}/,r+1),f.html(a),l.find("span.flcf-delete-button").remove(),n>1&&!FLCFCommon.field_options[e].fixed){var c=FLCFCommon.delete_labels[e];c=c.replace(/{{number}}/,r+1),l.children("div.flcf-field-header").append('<span class="flcf-delete-button"><button type="button">'+c+"</span>"),jQuery(l.find("span.flcf-delete-button button")).on("click",FLCFCommon.removeGroup)}if(FLCFCommon.field_options[e].unit_label){var d=l.find("select.flcf-change-unit");FLCFCommon.setUnitLabel(e,i,d)}}"customfield"==FLCFCommon.cf_type?FLCFCommon.normals[e]&&jQuery("#"+e+"-field .field-header button").text()==trans("Open all fields")&&jQuery("#"+e+"-field .flcf-field-content").hide():"contentfield"==FLCFCommon.cf_type&&FLCFCommon.normals[e]&&jQuery("#"+e+"_flcfg").parent().find("label .button").text()==trans("Open all fields")&&jQuery("#"+e+"_flcfg .flcf-field-content").hide(),jQuery("#"+e+"_order").val(o.length+"|"+t.join(","))},removeGroup:function(){jQuery(this);var e=jQuery(this).closest("div.flcf-block"),o=e.find(".flcf-field-label").text();if(!confirm(trans("Delete [_1] ?",o)))return!1;var t,n;"customfield"==FLCFCommon.cf_type?(t=MT.App.objectType?e.closest(".field").find("div.last-child"):e.closest(".field"),n=jQuery(t.children('input[type="hidden"]')[0]).prop("name")):"contentfield"==FLCFCommon.cf_type&&(n=(t=e.closest(".form-group")).children("input.flcf_content_field_values").prop("name"));var r=e.prop("id").match(/((?:customfield_|content-field-).*?)_flcfg(\d+?)$/);FLCFCommon.pre_remove_callback(r[1],r[2]);var l=FLCFCommon.field_options[n];if(l.accordion)var i=e.closest(".flcf.ui-accordion"),f=i.accordion("option","active"),a=jQuery(i.children(".flcf-block")[f]).prop("id"),c=e.prop("id");if(e.remove(),l.tab){var d=jQuery("#"+r[1]+"_flcfg");d.tabs("refresh");var m=d.children("ul.ui-tabs-nav"),u=d.tabs("option","active"),s=m.children("li");jQuery(s[u]).remove(),delete s[u]}if(FLCFCommon.renewValue(n),l&&l.tab){for(var p=u;p<s.length;p++){var C=jQuery(s[p]),F=C.attr("aria-controls"),_=jQuery("#"+F+" .flcf-field-header .flcf-field-label");C.children("a").text(_.text())}d.tabs("refresh")}else if(FLCFCommon.field_options[n].accordion)if(i.accordion("refresh"),a==c)i.accordion("option","active",f);else{var h=jQuery("#"+a).find(".flcf-field-content").get(0);setTimeout(function(){FLCFCommon.accordionHeightCheck(h)},100)}},pre_remove_callback:function(e,o){jQuery.each(FLCFCommon.field_defs[e],function(t,n){cbs=FLCFCommon.callbacks[n.type],cbs&&cbs.pre_remove&&cbs.pre_remove(e,o,t)})},setSortable:function(e){jQuery(e).sortable({items:"div.flcf-sort-enabled",placeholder:"placeholder",distance:3,opacity:.8,cursor:"move",forcePlaceholderSize:!0,handle:".flcf-field-header",containment:"parent",start:function(e,o){},stop:function(e,o){var t=o.item[0];FLCFCommon.changeUnit.apply(t)}})},setFloat:function(e){jQuery(e).sortable({items:"div.flcf-sort-enabled",distance:3,opacity:.8,cursor:"move",handle:".flcf-field-header",containment:"parent",stop:function(e,o){var t=o.item[0];FLCFCommon.changeUnit.apply(t)}})},initFields:function(){setTimeout(function(){var e;"customfield"==FLCFCommon.cf_type?e=jQuery(".field"):"contentfield"==FLCFCommon.cf_type&&(e=jQuery(".mt-mainContent div.form-group")),jQuery.each(e,function(){var e,o=jQuery(this);if("customfield"==FLCFCommon.cf_type){var t=o.prop("id").match(/^(customfield_.*?)-field$/);t&&(e=t[1])}else"contentfield"==FLCFCommon.cf_type&&(e=o.children("input.flcf_content_field_values").prop("id"));if(FLCFCommon.field_defs[e]){var n=jQuery("#"+e).val();n=jQuery.parseJSON(n),jQuery.each(o.find(".flcf-block"),function(){var e,o=jQuery(this),t=o.prop("id").match(/^((?:customfield_|content-field-).*?)_flcfg(\d+)$/),r=t[1],l=t[2],i=o.find("select.flcf-change-unit");i&&(e=i.val()),FLCFCommon.post_add_callback(r,l),FLCFCommon.field_options[r].unit_label&&FLCFCommon.setUnitLabel(r,l,i),FLCFCommon.setTabsAndAccordions(o),jQuery.each(FLCFCommon.field_defs[r],function(e,o){var t=FLCFCommon.field_defs[r][e].type;FLCFCommon.js_set_values[t]&&FLCFCommon.callbacks[t].set_value(r,l,e,n[l-1][e])}),jQuery(this).trigger("flcf_add",e)})}}),jQuery.each(FLCFCommon.normals,function(e){var o,t=jQuery('<button type="button">'+trans("Fold all fields")+"</button>");if("customfield"==FLCFCommon.cf_type){o=jQuery("#"+e+"-field .mt-flexBreak");var n=jQuery('<div class="col" style="text-align: right"></div>');n.append(t),o.before(n)}else"contentfield"==FLCFCommon.cf_type&&(t.addClass("flcf-fold-button"),(o=jQuery("#"+e+"_flcfg")).before(t),o.parent().css("position","relative"));t.on("click",function(){t.html()==trans("Fold all fields")?("customfield"==FLCFCommon.cf_type?jQuery("#"+e+"-field .flcf-field-content").hide():"contentfield"==FLCFCommon.cf_type&&jQuery("#"+e+"_flcfg .flcf-field-content").hide(),t.html(trans("Open all fields"))):("customfield"==FLCFCommon.cf_type&&jQuery("#"+e+"-field .flcf-field-content").show(),"contentfield"==FLCFCommon.cf_type&&jQuery("#"+e+"_flcfg .flcf-field-content").show(),t.html(trans("Fold all fields")))})}),jQuery.each(FLCFCommon.tabs,function(e){FLCFCommon.setupTab(e)}),jQuery.each(FLCFCommon.accordions,function(e){var o=jQuery("#"+e+"_flcfg"),t=o.children("div.flcf-block");o.siblings("p.flcf_add_button").addClass("flcf-add-button-margin");o.accordion({header:".flcf-field-header",animate:!1,activate:function(e,o){setTimeout(function(){FLCFCommon.accordionHeightCheck(o.newPanel.get(0))},100)}});if(o.on("mousedown","select.flcf-change-unit",function(e){var t=o.accordion("option","active"),n=jQuery(o.children("div.flcf-block")[t]),r=jQuery(this).closest("div.flcf-block");n.prop("id")!=r.prop("id")&&e.preventDefault()}),FLCFCommon.field_options[e].sortable){var n,r,l,i;o.sortable({handle:".flcf-field-header",items:"div.flcf-block",containment:"parent",start:function(e,o){var r=o.item,f=o.item.prop("id").match(/^(.*?_flcfg)\d+$/)[1],a=jQuery("#"+f);i=a.accordion("option","active"),t=a.children("div.flcf-block"),l=t.length;for(var c=0;c<l;c++)if(jQuery(t[c]).prop("id")==r.prop("id")){n=c;break}},stop:function(e,o){var f=o.item,a=o.item[0],c=f.prop("id").match(/^(.*?_flcfg)\d+$/)[1],d=jQuery("#"+c),m=FLCFCommon.changeUnit.apply(a);d.accordion("refresh"),t=d.children("div.flcf-block");for(var u=0;u<l;u++)if(jQuery(t[u]).prop("id")==m.prop("id")){r=u;break}n!=i&&r!=i?setTimeout(function(){FLCFCommon.accordionHeightCheck(jQuery(t[i]).children(".flcf-field-content").get(0))},100):n==i?(d.accordion("option","active",r),setTimeout(function(){FLCFCommon.accordionHeightCheck(m.children(".flcf-field-content").get(0))},100)):r==i&&d.accordion("option","active",r+1)}})}var f=jQuery(o.children("div.flcf-block")[0]).children(".flcf-field-content").get(0);setTimeout(function(){FLCFCommon.accordionHeightCheck(f)},100)})},10)},setupTab:function(e,o,t){for(var n=jQuery("#"+e+"_flcfg"),r=n.find("div.flcf-block"),l=jQuery("<ul>"),i=0;i<r.length;i++){var f=jQuery(r[i]),a=f.find("span.flcf-field-label"),c='<li><a href="#'+f.prop("id")+'">'+a.text()+"</a></li>";a.hide(),l.append(c)}n.siblings("p.flcf_add_button").addClass("flcf-add-button-margin"),"refresh"==o&&n.children("ul").remove(),n.prepend(l);var d=n.tabs();n.tabs("refresh"),n.tabs("option","active","refresh"==o?t:0),FLCFCommon.field_options[e].sortable&&d.find("ul.ui-tabs-nav").sortable({update:function(e,o){for(var t=[],n=o.item.parent(),r=n.find("li"),l=n.parent().prop("id").replace(/_flcfg$/,""),i=0;i<r.length;i++){var f=jQuery(r[i]),a=f.attr("aria-controls"),c=jQuery("#"+a),d=a.match(/_flcfg(\d+)$/)[1];if(t.push(d),FLCFCommon.field_options[l].unit_label)sel_elm=c.find("div.flcf-field-header select"),unit_label=sel_elm.find("option:selected").text(),f.children("a").text(unit_label),del_elm=c.find("div.flcf-field-header button"),del_elm.text(trans("Delete [_1]",unit_label));else{var m=FLCFCommon.group_labels[l];m=m.replace(/{{number}}/,i+1),f.children("a").text(m);var u=FLCFCommon.delete_labels[l];u=u.replace(/{{number}}/,i+1),c.find(".flcf-field-header .flcf-delete-button button").text(u)}}jQuery("#"+l+"_order").val(t.length+"|"+t.join(","))}})},setUnitLabel:function(e,o,t){var n=jQuery("#"+e+"_flcfg"+o+" div.flcf-field-header span.flcf-field-label"),r=jQuery("#"+e+"_flcfg"+o+" div.flcf-field-header button"),l=t.find("option:selected").text();n.text(l);var i=trans("Delete [_1]",l);r.text(i)},accordionHeightCheck:function(e){""!=e.style.height&&(e.style.height="",setTimeout(function(){FLCFCommon.accordionHeightCheck(e)},100))},fieldsToJSON:function(){for(var e in FLCFCommon.fields){for(var o=[],t=jQuery("#"+e+"_order").val().split("|"),n=t[0],r=t[1].split(","),l=0;l<n;l++){for(var i={},f=0;f<FLCFCommon.fields[e].length;f++){var a=FLCFCommon.fields[e][f],c=e+"_flcfg"+r[l]+"_"+a+"_",d=FLCFCommon.field_defs[e][a];i[a]=FLCFCommon.getFieldValue(d,c)}o.push(i)}jQuery("#"+e).val(o.toJSON())}},setCalendar:function(e){e.find("input.text-date").datepicker({dateFormat:"yy-mm-dd",dayNamesMin:FLCFCommon.day_names,monthNames:["- 01","- 02","- 03","- 04","- 05","- 06","- 07","- 08","- 09","- 10","- 11","- 12"],showMonthAfterYear:!0,prevText:"&lt;",nextText:"&gt;",onClose:function(e,o){var t=jQuery(this);if(!jQuery.data(this,"mtValidator"))return!0;t.mtValid({focus:!1})}})},setTabsAndAccordions:function(e){var o=e.find(".flcf-tab-wrapper");if(o.length){for(var t=0;t<o.length;t++)for(var n=jQuery(o[t]),r=n.find("ul.flcf-tab-names li"),l=n.find("div.flcf-tab-content"),i=e.prop("id")+"_flcf_tab"+t,f=0;f<r.length;f++){var a=i+"_"+f,c=jQuery(r[f]),d='<a href="#'+a+'">'+c.text()+"</a>";c.html(d),jQuery(l[f]).prop("id",a)}n.tabs()}e.find(".flcf-accordion-wrapper").accordion({animate:!1})},renewAccordionHeight:function(e,o){var t=jQuery(o.item[0]).prop("id").match(/(customfield.*?)-field$/);if(t&&FLCFCommon.field_options[t[1]].accordion){var n=t[1],r=jQuery("#"+n+"_flcfg"),l=r.accordion("option","active"),i=jQuery(r.find("div.flcf-block")[l]);setTimeout(function(){FLCFCommon.accordionHeightCheck(i.children(".flcf-field-content").get(0))},100)}},getFieldValue:function(e,o){var t=FLCFCommon.callbacks;if(t[e.type]&&t[e.type].get_value){var n=o.match(/^(.*?)_flcfg(\d+)_(.*?)_$/);return t[e.type].get_value(n[1],n[2],n[3])}return"checkbox"==e.type?jQuery("#"+o).prop("checked")?1:0:"radio"==e.type?jQuery('input[name="'+o+'"]:checked').val():"datetime"==e.type||"date"==e.type||"time"==e.type?FLCFCommon.getDateTime(e.type,o):jQuery("#"+o).val()},setDateTime:function(e,o,t){var n;try{n=jQuery.parseJSON(t)}catch(e){n=""}""==n?(ymd="",hms=""):"Object"==FLCFCommon.objtype(n)?(ymd=n.date,hms=n.time):(ymd=t.substr(0,8),hms=t.substr(8),ymd=ymd.replace(/(\d{4})(\d{2})(\d{2})/,function(e,o,t,n){return o+"-"+t+"-"+n}),hms=hms.replace(/(\d{2})(\d{2})(\d{2})/,function(e,o,t,n){return o+":"+t+":"+n})),jQuery("#"+o+"_d").val(ymd),jQuery("#"+o+"_t").val(hms)},getDateTime:function(e,o){if(0==jQuery("#"+o+"_d").length)return jQuery("#"+o).val();var t,n;if("datetime"==e?(t=jQuery("#"+o+"_d").val(),n=jQuery("#"+o+"_t").val()):"date"==e?n=(t=jQuery("#"+o+"_d").val())?"00:00:00":"":"time"==e&&(t=(n=jQuery("#"+o+"_t").val())?"1970-01-01":""),!t&&!n)return"";var r=t.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/),l=n.match(/^(\d{1,2}):(\d{1,2})(?::(\d{1,2})){0,1}$/);if(null!=r&&null!=l){l[3]=void 0==l[3]?0:l[3];var i=new Date(r[1],r[2]-1,r[3],l[1],l[2],l[3],0),f=i.getYear()+1900,a=i.getMonth()+1,c=i.getDate(),d=i.getHours(),m=i.getMinutes(),u=i.getSeconds();if(f!=r[1]||a!=r[2]||c!=r[3]||d!=l[1]||m!=l[2]||u!=l[3])return jQuery.toJSON({error:1,date:t,time:n});var s,p=function(e,o){for(var t="",n=0;n<o;n++)t+="0";return(t+e).substr(-o,o)};return s="Array"==FLCFCommon.objtype(r)?p(r[1],4)+p(r[2],2)+p(r[3],2):"19700101","Array"==FLCFCommon.objtype(l)?(l[3]=l[3]?l[3]:0,s+=p(l[1],2)+p(l[2],2)+p(l[3],2)):s+="000000",s}return jQuery.toJSON({error:1,date:t,time:n})},getFieldName:function(e){return jQuery(e).prop("id").match(/flcfg\d+_(.*)_$/),RegExp.$1},getBasename:function(e){return jQuery(e).prop("id").match(/customfield_(.*?)_flcfg/),RegExp.$1},getGroupNumber:function(e){return jQuery(e).prop("id").match(/_flcfg(\d+)_.*_$/),RegExp.$1},getGroupDiv:function(e){return jQuery(e).closest(".flcf-block")},objtype:function(e){return Object.prototype.toString.call(e).slice(8,-1)}};